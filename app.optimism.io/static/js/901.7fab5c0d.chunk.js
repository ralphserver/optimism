"use strict";(self.webpackChunk_gateway_frontend=self.webpackChunk_gateway_frontend||[]).push([[901],{54570:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ee}});var s=t(96902),i=t(5977),r=t(61975),a=t(14383),o=t(16884),c=t(52446),l=t(6359),d=t(38777),u=t(33028),h=t(2867),x=t(80765),p=t(5716),m=t(81705),v=t(34795),f=t(77162),j=t.n(f),b=t(20767),g=t(61829),_=t(54808),w=t(25409),I=t(56666),y=t(31461),k=t(7896),N=t(24463),T=t(5394),E=t(75092),C=t(9347),S=t(55960);var Z=s.createContext({}),O=t(56897),D=t(21105),R=t(81838),A=t(24569);var G=(0,A.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var W=(0,A.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);var H=(0,A.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),L=t(420);function P(e){return(0,L.Z)("MuiMenuItem",e)}var F=(0,A.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),B=t(29938),M=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],U=(0,C.ZP)(O.Z,{shouldForwardProp:function(e){return(0,C.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.dense&&n.dense,t.divider&&n.divider,!t.disableGutters&&n.gutters]}})((function(e){var n,t=e.theme,s=e.ownerState;return(0,k.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.divider&&{borderBottom:"1px solid ".concat(t.palette.divider),backgroundClip:"padding-box"},(n={"&:hover":{textDecoration:"none",backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,I.Z)(n,"&.".concat(F.selected),(0,I.Z)({backgroundColor:(0,E.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)},"&.".concat(F.focusVisible),{backgroundColor:(0,E.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)})),(0,I.Z)(n,"&.".concat(F.selected,":hover"),{backgroundColor:(0,E.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,E.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}),(0,I.Z)(n,"&.".concat(F.focusVisible),{backgroundColor:t.palette.action.focus}),(0,I.Z)(n,"&.".concat(F.disabled),{opacity:t.palette.action.disabledOpacity}),(0,I.Z)(n,"& + .".concat(G.root),{marginTop:t.spacing(1),marginBottom:t.spacing(1)}),(0,I.Z)(n,"& + .".concat(G.inset),{marginLeft:52}),(0,I.Z)(n,"& .".concat(H.root),{marginTop:0,marginBottom:0}),(0,I.Z)(n,"& .".concat(H.inset),{paddingLeft:36}),(0,I.Z)(n,"& .".concat(W.root),{minWidth:36}),n),!s.dense&&(0,I.Z)({},t.breakpoints.up("sm"),{minHeight:"auto"}),s.dense&&(0,k.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,(0,I.Z)({},"& .".concat(W.root," svg"),{fontSize:"1.25rem"})))})),q=s.forwardRef((function(e,n){var t=(0,S.Z)({props:e,name:"MuiMenuItem"}),i=t.autoFocus,r=void 0!==i&&i,a=t.component,o=void 0===a?"li":a,c=t.dense,l=void 0!==c&&c,d=t.divider,u=void 0!==d&&d,h=t.disableGutters,x=void 0!==h&&h,p=t.focusVisibleClassName,m=t.role,v=void 0===m?"menuitem":m,f=t.tabIndex,j=(0,y.Z)(t,M),b=s.useContext(Z),g={dense:l||b.dense||!1,disableGutters:x},_=s.useRef(null);(0,D.Z)((function(){r&&_.current&&_.current.focus()}),[r]);var w,I=(0,k.Z)({},t,{dense:g.dense,divider:u,disableGutters:x}),E=function(e){var n=e.disabled,t=e.dense,s=e.divider,i=e.disableGutters,r=e.selected,a=e.classes,o={root:["root",t&&"dense",n&&"disabled",!i&&"gutters",s&&"divider",r&&"selected"]},c=(0,T.Z)(o,P,a);return(0,k.Z)({},a,c)}(t),C=(0,R.Z)(_,n);return t.disabled||(w=void 0!==f?f:-1),(0,B.jsx)(Z.Provider,{value:g,children:(0,B.jsx)(U,(0,k.Z)({ref:C,role:v,tabIndex:w,component:o,focusVisibleClassName:(0,N.default)(E.focusVisible,p)},j,{ownerState:I,classes:E}))})})),V=t(67816),Y=t(67833),z=t(70864),J=t(22293),K=t(78189),Q=t(79764),X=t(95541),$=t(73593),ee=t(10324),ne=t(74110),te=t(47937),se=t(40946),ie=t(1864),re=t(52543),ae=t(97224);function oe(e,n){(0,s.useEffect)((function(){var t=function(t){e.current&&!e.current.contains(t.target)&&n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e,n])}var ce=t(57350),le=t(26417);var de=function(e){var n=e.showBalances,t=(0,s.useState)(!1),i=(0,h.Z)(t,2),r=i[0],c=i[1],d=(0,s.useState)(),u=(0,h.Z)(d,2)[1],x=(0,s.useState)(""),v=(0,h.Z)(x,2),f=v[0],j=v[1],_=(0,p.K)(),I=_.chainId,y=_.account,k=((0,ce.r)(o.Cp,I===V.ny.chainId||I===Y.qr.chainId||I===V.UY.chainId||I===Y.tm.chainId?I:V.ny.chainId)||{}).tokensWithEth;k=k.filter((function(e){return e.address!==le.Kz}));var N=(0,s.useState)(),T=(0,h.Z)(N,2),E=T[0],C=T[1],S=(0,s.useState)([]),Z=(0,h.Z)(S,2),O=Z[0],D=Z[1],R=(0,a.FV)(l.G2),A=(0,h.Z)(R,2),G=A[0],W=A[1],H=(0,s.useRef)(null),L=(0,te.tO)(k,y).tokenBalancesWithEth;oe(H,(function(){P(),(0,m.i8)(!1)})),(0,s.useEffect)((function(){if(k&&I){var e=o.GP.find((function(e){return e.chainId===I}));if(e||(e=o.GP[1]),u(e),G.address){var n=k.find((function(e){return e.symbol===G.symbol}));n&&W(n)}else W(e)}}),[JSON.stringify(k),I]);var P=function(){j(""),c(!1)};return(0,B.jsxs)("div",{className:"asset-picker__container",children:[(0,B.jsxs)("button",{className:"asset-picker__select-btn",onClick:function(){C(k),D(L),c(!0),(0,m.i8)(!0)},children:[(0,B.jsx)("img",{alt:G.name+" logo",src:null===G||void 0===G?void 0:G.logoURI}),(0,B.jsx)("span",{children:null===G||void 0===G?void 0:G.symbol}),(0,B.jsx)(w.G,{icon:ie.ptq})]}),(0,B.jsx)(re.Z,{in:r,timeout:100,children:(0,B.jsx)("div",{className:"asset-picker__modal-overlay",children:(0,B.jsxs)("div",{ref:H,className:"asset-picker__modal-container",children:[(0,B.jsxs)("div",{className:"asset-picker__header",children:[(0,B.jsx)("h1",{children:"Select token"}),(0,B.jsx)(w.G,{icon:ie.NBC,onClick:function(){P(),(0,m.i8)(!1)}})]}),(0,B.jsx)("ul",{className:"asset-picker__token-nav",children:[{text:"Tokens",selected:!0}].map((function(e,n){return(0,B.jsx)("li",{children:(0,B.jsx)("button",{className:e.selected?"active":"",children:e.text})},n)}))}),(0,B.jsxs)("div",{className:"asset-picker__token-input",children:[(0,B.jsx)(w.G,{icon:ie.wn1}),(0,B.jsx)("input",{placeholder:"Search name or paste address",value:f,onChange:function(e){return function(e){if(j(e),e){for(var n=[],t=[],s=0;s<k.length;s++){var i=k[s];(i.symbol.toLowerCase().includes(e.toLowerCase())||i.name.toLowerCase().includes(e.toLowerCase()))&&(n.push(i),t.push(L[s]))}C(n),D(t)}else C(k),D(L)}(e.target.value.toLowerCase())}})]}),(0,B.jsx)("ul",{className:"asset-picker__token-container",children:null===E||void 0===E?void 0:E.map((function(e,t){return(0,B.jsxs)("li",{onClick:function(){return function(e){W(e),P(),(0,m.i8)(!1)}(e)},children:[(0,B.jsxs)("div",{className:"asset-picker__first-section",children:[(0,B.jsx)("img",{alt:e.name+" logo",src:e.logoURI}),(0,B.jsxs)("div",{children:[(0,B.jsx)("h2",{children:e.symbol}),(0,B.jsx)("span",{children:e.name})]})]}),(0,B.jsxs)("div",{className:"asset-picker__balance-container\n                      ".concat(G.address!==e.address?" deselected":" "),children:[n&&O.length?(0,B.jsx)("span",{className:"asset-picker__asset-balance",children:(0,m.HA)(parseFloat((0,b.bM)(O[t]?O[t][0]:0,e.decimals)))}):n&&(0,B.jsx)(ae.Z,{width:"40px",height:"20px",variant:"text"}),(null===G||void 0===G?void 0:G.address)===e.address&&(0,B.jsx)(w.G,{icon:g.LEp})]})]},t)}))})]})})})]})},ue=t(19001),he=t(86208),xe=t(59158);var pe=function(e){var n=e.routing,t=e.type,s=e.showExecutionAmount,i=e.showExecutionFooter,r=e.gasFeeToTransfer,a=e.routingOption,c=(0,m.OP)(),l=(0,xe.Z)(c),d=(0,xe.Z)(r);return(0,B.jsx)("div",{children:i&&(0,B.jsxs)("ul",{className:"native-transaction__execution-details",children:[n&&(0,B.jsxs)("li",{children:[(0,B.jsx)("div",{className:"native-transaction__execution-label",children:"Routing"}),s?n:(0,B.jsx)(ae.Z,{width:"160px"})]}),(0,B.jsxs)("li",{children:[(0,B.jsxs)("div",{className:"native-transaction__execution-label","data-cy":"native-transaction__gas-fee",children:[(0,B.jsx)("span",{children:"Gas fee to ".concat(t===o.s5.WITHDRAW?"initiate":"transfer")}),t===o.s5.WITHDRAW?(0,B.jsx)(he.Z,{placement:"top",title:"Gas paid on ETH L1 to complete your withdrawal",arrow:!0,children:(0,B.jsx)("span",{children:(0,B.jsx)(w.G,{icon:g.sqG})})}):null]}),s?(0,B.jsxs)("div",{"data-cy":"native-transaction__execution-value",className:"native-transaction__execution-value",children:[(0,B.jsxs)("span",{children:[r," ETH"]}),(0,B.jsxs)("span",{children:[" ($",d,")"]})]}):(0,B.jsx)(ae.Z,{width:"160px"})]}),t===o.s5.WITHDRAW?(0,B.jsxs)("li",{children:[(0,B.jsxs)("div",{className:"native-transaction__execution-label",children:[(0,B.jsx)("span",{children:"Gas fee to complete"}),(0,B.jsx)(he.Z,{placement:"top",title:"Gas paid on ETH L1 to complete your withdrawal",arrow:!0,children:(0,B.jsx)("span",{children:(0,B.jsx)(w.G,{icon:g.sqG})})})]}),s?(0,B.jsxs)("div",{className:"native-transaction__execution-value",children:[(0,B.jsxs)("span",{children:["~",c," ETH"]}),(0,B.jsxs)("span",{children:[" (~$",l,")"]})]}):(0,B.jsx)(ae.Z,{width:"160px"})]}):null,(0,B.jsxs)("li",{children:[(0,B.jsxs)("div",{className:"native-transaction__execution-label",children:[(0,B.jsx)("span",{children:"Time to transfer"}),(0,B.jsx)(he.Z,{placement:"top",title:"".concat(t===o.s5.WITHDRAW?"Withdrawals":"Deposits"," take about ").concat(t===o.s5.WITHDRAW?"7 days":a===ue.D.TELAPORTR?"one to two minutes":"twenty minutes"," before they're considered final on Optimism"),arrow:!0,children:(0,B.jsx)("span",{children:(0,B.jsx)(w.G,{icon:g.sqG})})})]}),s?(0,B.jsx)("div",{className:"native-transaction__execution-value",children:(0,B.jsx)("span",{children:t===o.s5.WITHDRAW?"~7 days":a===ue.D.TELAPORTR?"1 to 2 minutes":"~20 minutes"})}):(0,B.jsx)(ae.Z,{width:"64px"})]})]})})},me=t(26545),ve=t(77287);function fe(e){var n=e.routingOption,t=e.setRoutingOption,i=(e.children,(0,s.useState)(!1)),r=(0,h.Z)(i,2),a=r[0],c=r[1],l=function(e){t(e),c(!1)};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(ve.Z,{open:a,onClose:function(){c(!1)},children:(0,B.jsxs)("div",{className:"routingSelect__modal",children:[(0,B.jsx)("button",{className:"close",onClick:function(){c(!1)},children:(0,B.jsx)(w.G,{icon:ie.NBC})}),(0,B.jsx)("h1",{children:"Select routing"}),(0,B.jsxs)("p",{children:["You can choose between a custodial bridge or trustless bridge when sending less than ",o.Yz," ETH."]}),(0,B.jsxs)("div",{className:"buttonWrapper",children:[(0,B.jsxs)("button",{onClick:function(){l(ue.D.TELAPORTR)},children:[(0,B.jsx)("div",{className:"icon",children:(0,B.jsx)(w.G,{icon:_.BDt})}),(0,B.jsxs)("div",{children:[(0,B.jsx)("h3",{children:ue.D.TELAPORTR}),(0,B.jsxs)("p",{children:["Fast and low fees. Sends funds over a custodial bridge, which means you're trusting Optimism with your funds."," "]})]})]}),(0,B.jsxs)("button",{onClick:function(){l(ue.D.OFFICIAL_BRIDGE)},children:[(0,B.jsx)("div",{className:"icon",children:(0,B.jsx)(w.G,{icon:_.HK8})}),(0,B.jsxs)("div",{children:[(0,B.jsx)("h3",{children:"Standard Speed"}),(0,B.jsx)("p",{children:"Uses a trustless bridge, which means your assets are transferred to L2 using the same underlying trust mechanism as Optimism and Ethereum themselves."})]})]})]})]})}),(0,B.jsxs)("div",{className:"routingSelect__container","data-cy":"routingSelect__container",onClick:function(){c(!0)},children:[n===ue.D.TELAPORTR&&(0,B.jsx)("span",{className:"bolt",children:(0,B.jsx)(w.G,{icon:_.BDt})}),(0,B.jsx)("span",{children:n}),(0,B.jsx)(w.G,{className:"arrow",icon:_.ptq})]})]})}var je=t(41177),be=t(7813),ge=function(e,n,t,i,r,c){var d="insufficient funds for intrinsic transaction cost",u=function(e){var n=!1;return function(){n||((0,X.toast)(e),n=!0)}}(d),h=((0,z.K)(o.Cp,c&&(0,m.fk)(c)?Y.tm.chainId:Y.qr.chainId)||{}).tokens,x=((0,z.K)(o.Cp,c&&(0,m.fk)(c)?V.UY.chainId:V.ny.chainId)||{}).tokens,p=(0,a.sJ)(l.CH),f=function(){var n=(0,v.Z)(j().mark((function n(t){var s,r,a,c,l;return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=t.type,r=t.selectedAsset,a=t.amount,c=null===h||void 0===h?void 0:h.find((function(e){return e.symbol===r.symbol})),l=null===x||void 0===x?void 0:x.find((function(e){return e.symbol===r.symbol})),"ETH"===r.symbol||l&&c){n.next=5;break}throw new Error("Could not find tokens");case 5:if(s!==o.s5.DEPOSIT){n.next=39;break}if("ETH"!==(null===r||void 0===r?void 0:r.symbol)){n.next=20;break}return n.prev=7,n.next=10,p.estimateGas.depositETH(a);case 10:return n.abrupt("return",n.sent.toString());case 13:n.prev=13,n.t0=n.catch(7),n.t0.message.includes(d)&&u(),console.log("error here",n.t0.message),console.log(n.t0);case 18:n.next=37;break;case 20:if("SNX"!==(null===r||void 0===r?void 0:r.symbol)){n.next=26;break}return n.next=23,e.estimateGasDeposit(a);case 23:return n.abrupt("return",n.sent.toString());case 26:if(c){n.next=28;break}throw new Error("unable to find token");case 28:return n.prev=28,n.next=31,p.estimateGas.depositERC20(l.address,c.address,a.toString(),{overrides:{from:i}});case 31:return n.abrupt("return",n.sent.toString());case 34:n.prev=34,n.t1=n.catch(28),console.log(n.t1);case 37:n.next=66;break;case 39:if(s!==o.s5.WITHDRAW){n.next=65;break}if("ETH"!==(null===r||void 0===r?void 0:r.symbol)){n.next=46;break}return n.next=43,p.estimateGas.withdrawETH(a,{overrides:{from:i}});case 43:return n.abrupt("return",n.sent.toString());case 46:if("SNX"!==(null===r||void 0===r?void 0:r.symbol)){n.next=52;break}return n.next=49,e.estimateGasWithdraw(a);case 49:return n.abrupt("return",n.sent.toString());case 52:if(c){n.next=54;break}throw new Error("unable to find token");case 54:return n.prev=54,n.next=57,p.estimateGas.withdrawERC20(l.address,c.address,a,{overrides:{from:i}});case 57:return n.abrupt("return",n.sent.toString());case 60:n.prev=60,n.t2=n.catch(54),console.error(n.t2);case 63:n.next=66;break;case 65:throw new Error("unexpected type ".concat(s));case 66:case"end":return n.stop()}}),n,null,[[7,13],[28,34],[54,60]])})));return function(e){return n.apply(this,arguments)}}(),b=(0,s.useMemo)((function(){return r}),[null===r||void 0===r?void 0:r.toString()]),g=(0,s.useMemo)((function(){return{query:"crossChainMessenger",type:n,selectedAsset:t,amount:b}}),[n,t,b]),_=(0,be.F)(),w=r&&r.gt(0),I=(0,$.ZP)(w?g:null,f),y=I.data,k=I.error;return{data:y&&_&&(0,ee.d)(y,_),error:k}},_e=window;_e.teleportr=function(){throw new Error("component not mounted yet")};var we=function(e){var n,t,i,d,u,f,I,y,k=e.type,N=e.optionsDropdown,T=e.snx,E=e.resetComponent,C=s.useReducer((function(e){return!e}),!ne.V.ENABLE_TELEPORTR),S=(0,h.Z)(C,2),Z=S[0],O=S[1];s.useEffect((function(){console.log("on")}),[Z]),_e.teleportr=O;var D=(0,p.K)(),R=D.account,A=D.library,G=null!==(n=(0,se.Ab)())&&void 0!==n?n:se.p5.Mainnet,W=(0,a.sJ)(l.G2),H=G.isTestChain,L=(0,te.U9)(W,H?V.UY.chainId:V.ny.chainId),P=(0,te.U9)(W,H?Y.tm.chainId:Y.qr.chainId),F=(0,s.useState)(""),M=(0,h.Z)(F,2),U=M[0],ie=M[1],re=s.useMemo((function(){return b.vz(U||"0",W.decimals)}),[U,W]),ae=!Z&&"Ether"===W.name&&k===o.s5.DEPOSIT&&parseFloat(U)<=Number(o.Yz),oe=G.l1.chainId,ce=(0,ee.V)(U,ae,oe),le=(0,ee.V)(U,ae,oe).gasEstimate,he=ae&&(null===(t=ce.telaportrStatus)||void 0===t?void 0:t.is_available)&&!ce.errors.estimate,xe=he?ue.D.TELAPORTR:ue.D.OFFICIAL_BRIDGE,ve=s.useState(),be=(0,h.Z)(ve,2),we=be[0],Ie=be[1],ye=we||xe,ke=(0,s.useState)(!1),Ne=(0,h.Z)(ke,2),Te=Ne[0],Ee=Ne[1],Ce=(0,s.useState)(!1),Se=(0,h.Z)(Ce,2),Ze=Se[0],Oe=Se[1],De=(0,s.useState)(!1),Re=(0,h.Z)(De,2),Ae=Re[0],Ge=Re[1],We=(0,s.useState)(!1),He=(0,h.Z)(We,2),Le=He[0],Pe=He[1],Fe=(0,s.useState)(""),Be=(0,h.Z)(Fe,2),Me=Be[0],Ue=Be[1],qe=(0,s.useState)(!1),Ve=(0,h.Z)(qe,2),Ye=Ve[0],ze=Ve[1],Je=ge(T,k,W,R,re,G.chainId).data,Ke=(0,a.sJ)(l.CH),Qe=((0,z.K)(o.Cp,G.l2.chainId)||{}).tokens,Xe=null===Qe||void 0===Qe?void 0:Qe.find((function(e){return e.symbol===W.symbol})),$e=function(){var e=(0,v.Z)(j().mark((function e(){var n,t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null===Qe||void 0===Qe?void 0:Qe.find((function(e){return e.symbol===W.symbol})))){e.next=8;break}return e.next=4,Ke.getBridgeForTokenPair(W.address,null===n||void 0===n?void 0:n.address);case 4:return t=e.sent,e.abrupt("return",t.l1Bridge.address);case 8:throw new Error("no l2 token");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),en=(0,$.ZP)("getOptimisticBridge:".concat(null===Xe||void 0===Xe?void 0:Xe.address),$e).data,nn="SNX"===W.symbol,tn=k===o.s5.DEPOSIT?null===(i=T.snxjs)||void 0===i||null===(d=i.contracts.SynthetixBridgeToOptimism)||void 0===d?void 0:d.address.toLowerCase():null===(u=T.snxjs)||void 0===u||null===(f=u.contracts.SynthetixBridgeToBase)||void 0===f?void 0:f.address.toLowerCase(),sn=nn?tn:en,rn=(0,J.F)(k===o.s5.DEPOSIT?W.address:null===Xe||void 0===Xe?void 0:Xe.address,R,sn),an=rn&&re.lte(rn),on=Boolean(!an&&U&&"ETH"!==W.symbol&&(k===o.s5.CLAIM||(k===o.s5.DEPOSIT||"SNX"===W.symbol))),cn=(0,s.useState)(!1),ln=(0,h.Z)(cn,2),dn=ln[0],un=ln[1],hn=function(){var e=(0,v.Z)(j().mark((function e(){var n,t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(un(!0),e.prev=1,"SNX"!==W.symbol){e.next=12;break}if(k!==o.s5.DEPOSIT){e.next=8;break}return e.next=6,T.doSnxApprove(Q.Bz);case 6:e.next=10;break;case 8:return e.next=10,T.doSnxApproveWithdraw(Q.Bz);case 10:return un(!1),e.abrupt("return");case 12:if(!(n=null===Qe||void 0===Qe?void 0:Qe.find((function(e){return e.symbol===W.symbol})))){e.next=19;break}return e.next=16,Ke.approveERC20(W.address,n.address,Q.Bz);case 16:return t=e.sent,e.next=19,null===t||void 0===t?void 0:t.wait();case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),console.log(e.t0),(0,X.toast)("There was an error approving");case 25:un(!1);case 26:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}(),xn=ge(T,k,W,R,K.O$.from(null!==(I=k===o.s5.DEPOSIT?L:P)&&void 0!==I?I:"0"),G.chainId).data,pn=(0,r.s0)(),mn=(0,m.rR)(G.chainId,k),vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce.gasEstimate,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;return k===o.s5.DEPOSIT?ye===ue.D.TELAPORTR?e:n:k===o.s5.WITHDRAW?n:void 0},fn=vn(),jn=vn(le,xn),bn=fn&&b.fi(fn.toString());(0,s.useEffect)((function(){k===o.s5.WITHDRAW&&ye===ue.D.TELAPORTR&&Ie(ue.D.OFFICIAL_BRIDGE)}),[he,ye,k]),(0,s.useEffect)((function(){var e=setTimeout((function(){Ge(!0)}),3e3);return function(){return clearTimeout(e)}}),[]),(0,s.useEffect)((function(){Ze&&!U&&Oe(!1)}),[Ze,U]),(0,s.useEffect)((function(){ie(""),Ee(!1)}),[W.name]),(0,s.useEffect)((function(){R?(Te||0===U.length?ze(!0):ze(!1),k===o.s5.DEPOSIT?Ue("Deposit"):Ue("Withdraw"),Te&&Ue("Insufficient balance"),0===U.length&&Ue("Enter an amount")):Ue("Connect Wallet")}),[Te,U,k,R,on]);var gn=function(){return k===o.s5.DEPOSIT?G.l1:G.l2},_n=G.chainId!==(null===(y=gn())||void 0===y?void 0:y.chainId),wn=function(){var e=(0,v.Z)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k!==o.s5.WITHDRAW){e.next=8;break}if(e.t0=G.isL2Chain,!e.t0){e.next=5;break}return e.next=5,(0,m.St)(G.l1.chainId,A);case 5:pn(c._j.HOME.create({})),e.next=13;break;case 8:if(e.t1=G.isL1Chain,!e.t1){e.next=12;break}return e.next=12,(0,m.St)(G.l2.chainId,A);case 12:pn(c._j.WITHDRAW.create({}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),In=(0,a.Zl)(l._J),yn=function(){var e=(0,v.Z)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R||In(!0),Te||!U){e.next=17;break}if(k!==o.s5.DEPOSIT){e.next=11;break}if(!G.isL2Chain){e.next=8;break}return e.next=6,(0,m.St)(G.l1.chainId,A);case 6:e.next=9;break;case 8:Pe(!0);case 9:e.next=17;break;case 11:if(!G.isL1Chain){e.next=16;break}return e.next=14,(0,m.St)(G.l2.chainId,A);case 14:e.next=17;break;case 16:Pe(!0);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){kn(U)}),[G.chainId,U]);var kn=function(e){var n=b.vz((e||"0").toString(),W.decimals),t=k===o.s5.DEPOSIT?L:P;t&&(K.O$.from(t).sub("Ether"===W.name&&bn?bn:0).lt(n)&&(0,m.Uo)(G.chainId,k)&&e?Ee(!0):Ee(!1))};return(0,B.jsxs)("div",{className:"native-transaction__container",children:[(0,B.jsxs)("div",{className:"native-transaction__from",children:[N,(0,B.jsxs)("div",{className:"native-transaction__input-container ".concat(Te?"native-transaction__insufficient":""),children:[(0,B.jsx)("input",{type:"number",placeholder:"0.0",value:U,min:"0",onWheel:function(e){return e.target.blur()},onChange:function(e){var n=e.target.value.replace("-","");ie(n),kn(n),!Ze&&n&&(Oe(!0),setTimeout((function(){Ge(!0)}),4e3))}}),(0,B.jsx)(de,{showBalances:(0,m.XV)(G.chainId,R,k)})]}),Te?(0,B.jsxs)("div",{className:"native-transaction__insufficient-balance",children:[(0,B.jsx)(w.G,{icon:_.RLE}),(0,B.jsxs)("span",{children:["Insufficient ",null===W||void 0===W?void 0:W.symbol," balance"]})]}):null,P&&L?(0,B.jsxs)("div",{children:[(0,B.jsxs)("span",{children:["Balance:"," ",(0,m.HA)(parseFloat((0,b.bM)(k===o.s5.DEPOSIT?L:P,W.decimals)))," ",null===W||void 0===W?void 0:W.symbol]}),("ETH"!==W.symbol||jn)&&k!==o.s5.CLAIM&&(k===o.s5.DEPOSIT?L:P)&&(0,B.jsx)("button",{onClick:function(){var e=k===o.s5.DEPOSIT?L:P;if(e){var n=K.O$.from(e).sub("Ether"===W.name&&bn?bn:0),t=(0,b.bM)(n,W.decimals);ie(t),kn(t),!Ze&&e&&(Oe(!0),setTimeout((function(){Ge(!0)}),4e3))}},className:"native-transaction__max-button",children:"(Max)"})]}):null]}),(0,B.jsx)("button",{onClick:function(){return wn()},className:"native-transaction__arrow-down",children:(0,B.jsx)(w.G,{icon:g.r5q})}),(0,B.jsxs)("div",{className:"native-transaction__to",children:[(0,B.jsxs)("section",{className:"native-transaction__to-network",children:[(0,B.jsx)("span",{children:"To"}),(0,B.jsx)("img",{alt:"chain icon",src:x.n[mn].icon}),(0,B.jsx)("span",{className:"native-transaction__network-text",children:x.n[mn].text})]}),(0,B.jsxs)("section",{className:"native-transaction__receive-amount",children:["You will receive: ",U||0," ",null===W||void 0===W?void 0:W.symbol]}),P&&L&&(0,B.jsxs)("section",{className:"native-transaction__receive-amount",children:["Balance:"," ","".concat((0,m.HA)(parseFloat((0,b.bM)(k===o.s5.DEPOSIT?P:L,W.decimals)))," ").concat(null===W||void 0===W?void 0:W.symbol)]})]}),(0,B.jsxs)("div",{className:"native-transaction__button-container",children:[_n&&(0,B.jsx)(me.Z,{onClick:function(){return(0,m.St)(gn().chainId,A)},text:"Switch To ".concat(G.pairChain.humanReadableName)}),!_n&&on&&(0,B.jsx)(me.Z,{onClick:function(){return hn()},text:"Approve",disabled:Ye,loader:dn}),!_n&&(0,B.jsx)(me.Z,{onClick:function(){return yn()},text:Me,disabled:Ye||on})]}),(0,B.jsx)(pe,{routingOption:ye,routing:he&&(0,B.jsxs)(fe,{routingOption:ye,setRoutingOption:Ie,children:[(0,B.jsx)(q,{value:ue.D.TELAPORTR,children:ue.D.TELAPORTR}),(0,B.jsx)(q,{value:ue.D.OFFICIAL_BRIDGE,children:ue.D.OFFICIAL_BRIDGE})]}),type:k,showExecutionAmount:Ae&&Boolean(fn),showExecutionFooter:Ze&&!on,gasFeeToTransfer:fn}),(0,B.jsx)(je.Z,{resetComponent:E,telaportr:ce,routingOption:ye,type:k,showTransactionModal:Le,amount:U,handleClose:function(){Pe(!1)},gasFeeToTransfer:fn})]})};var Ie=function(e){var n=e.options,t=e.fromChain,i=(0,s.useState)([]),r=(0,h.Z)(i,2),c=r[0],d=r[1],u=(0,a.sJ)(l.G2);return(0,s.useEffect)((function(){if(n){var e=n.filter((function(e,n){return n<o.Ic}));d(e)}}),[n]),(0,B.jsx)("div",{children:n.length?(0,B.jsxs)("ul",{className:"options-manager__container",children:[c.map((function(e,n){return(0,B.jsx)("a",{href:(0,m.rE)(e.name,u.symbol)?(0,m.rE)(e.name,u.symbol):"https://".concat(e.urlText),target:"_blank",rel:"noreferrer",children:(0,B.jsxs)("li",{children:[(0,B.jsxs)("div",{className:"options-manager__content-container",children:[(0,B.jsx)("img",{alt:e.name,src:e.icon}),(0,B.jsxs)("div",{className:"options-manager__text-container",children:[(0,B.jsx)("h1",{children:e.name}),(0,B.jsx)("h2",{children:e.urlText})]})]}),(0,B.jsx)(w.G,{icon:ie.gJF})]})},n)})),c.length!==n.length&&(0,B.jsx)("li",{className:"options-manager__see-more",onClick:function(){return d(n)},children:"See more options"})]}):(0,B.jsxs)("div",{className:"options-manager__no-results",children:[(0,B.jsx)("h2",{children:"No results"}),(0,B.jsxs)("p",{children:["There are no bridges to directly transfer ",u.symbol," ","from ",t," at the moment."]})]})})};var ye=function(e){var n,t=e.optionsDropdown,i=(0,s.useState)([]),c=(0,h.Z)(i,2),d=c[0],u=c[1],v=(0,a.sJ)(l._t),f=(0,a.sJ)(l.G2),j=(0,r.UO)();console.log(j);var b=(0,p.K)().chainId;return(0,s.useEffect)((function(){if(b){var e=(0,m.Ju)(v.chainId||b,f.symbol,v.type);u(e)}}),[b,v,f]),(0,B.jsxs)("div",{className:"external-transaction__container",children:[(0,B.jsxs)("div",{className:"external-transaction__chain-info",children:[t,b&&(0,B.jsxs)("div",{className:"external-transaction__text",children:[v.type!==o.Az.ONRAMP?(0,B.jsxs)("section",{children:["To move tokens from ",v.text," to Optimism you can use one of the following third-party bridges"]}):(0,B.jsx)("section",{children:"To purchase tokens using a credit or debit card you can use one of the following fiat on-ramp services."}),(0,B.jsx)("section",{children:"These are independent service providers that Optimism is linking to for your convenience - Optimism has no responsibility for their operation."})]})]}),v.type===o.Az.CHAIN&&(0,B.jsxs)("div",{children:[(0,B.jsx)("h2",{children:"Token to deposit"}),(0,B.jsx)(de,{showBalances:!1})]}),(0,B.jsx)(Ie,{options:d,fromChain:b?null===(n=x.QW[b])||void 0===n?void 0:n.text:V.ny.chainName})]})},ke=function(e){var n=Object.assign({},e),t=(0,a.Zl)(l._J),i=(0,s.useState)(!1),r=(0,h.Z)(i,2),c=r[0],d=r[1],u=(0,p.K)(),f=u.chainId,b=u.account,g=u.library,_=(0,a.FV)(l._t),I=(0,h.Z)(_,2),y=I[0],k=I[1],N=(0,s.useRef)(null);oe(N,(function(){return d(!1)})),(0,s.useEffect)((function(){var e=(0,m.PP)(f,b);if(Object.keys(n).length&&!y.type){if(!b){var t=(0,h.Z)(n.CHAIN,1)[0];k(t)}var s=n.CHAIN.find((function(e){return e.chainId===f}));if(e&&s)k(s);else if((0,m.fk)(f))k(x.fQ[V.UY.chainId]);else{var i=(0,h.Z)(n.CHAIN,1)[0];k(i)}}}),[b,f,n,y,k]);var T=f&&y.chainId&&f!==y.chainId&&(0,m.tN)(f,o.S7,y);(0,s.useEffect)((function(){if(T){var e,t=null===(e=n.CHAIN)||void 0===e?void 0:e.find((function(e){return e.chainId===f}));t&&k(t)}}),[T]);var E=function(){var e=(0,v.Z)(j().mark((function e(n){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.chainId){e.next=22;break}if((0,m.PP)(f,b)){e.next=7;break}return t(!0),e.abrupt("return");case 7:if(n.chainId!==V.ny.chainId&&n.chainId!==V.UY.chainId){e.next=22;break}return e.prev=8,e.next=11,(0,m.St)(n.chainId,g);case 11:return d(!1),(0,m.tN)(f,o.S7,y)||k(n),e.abrupt("return");case 16:return e.prev=16,e.t0=e.catch(8),(0,X.toast)("Unable to switch chains"),console.log(e.t0),d(!1),e.abrupt("return");case 22:k(n),d(!1);case 24:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n){return e.apply(this,arguments)}}();return(0,B.jsx)("div",{className:"options-dropdown__container",children:Object.keys(n).length?(0,B.jsxs)("div",{className:"options-dropdown__menu",children:[(0,B.jsx)("span",{className:"options-dropdown__from",children:"From"}),(0,B.jsxs)("button",{onClick:function(){return d(!c)},className:"options-dropdown__trigger",children:[(0,B.jsx)("img",{alt:null===y||void 0===y?void 0:y.text,className:y.type===o.Az.ONRAMP?"onRamp":"",src:null===y||void 0===y?void 0:y.icon}),(0,B.jsx)("span",{children:null===y||void 0===y?void 0:y.text}),(0,B.jsx)(w.G,{icon:ie.ptq})]}),c&&(0,B.jsx)(re.Z,{in:c,ref:N,className:"options-dropdown__visible",children:(0,B.jsx)("div",{children:Object.keys(n).map((function(e,t){return(0,B.jsxs)("div",{children:[(0,B.jsx)("h1",{className:"options-dropdown__header",children:e}),(0,B.jsx)("ul",{children:n[e].map((function(e,n){return(0,B.jsx)("li",{children:(0,B.jsxs)("button",{className:(null===e||void 0===e?void 0:e.text)===(null===y||void 0===y?void 0:y.text)?"active":"",onClick:function(){return E(e)},children:[(0,B.jsxs)("div",{className:"options-dropdown__img-container",children:[(0,B.jsx)("img",{alt:e.text,className:e.type===o.Az.ONRAMP?"active":"",src:e.icon}),(0,B.jsx)("span",{children:e.text})]}),(null===e||void 0===e?void 0:e.text)===(null===y||void 0===y?void 0:y.text)&&(0,B.jsx)(w.G,{icon:ie.LEp})]})},n)}))})]},t)}))})})]}):(0,B.jsxs)("div",{className:"options-dropdown__from-network",children:[(0,B.jsx)("span",{children:"From"}),(0,B.jsx)("img",{alt:"Optimism logo",src:x.QW[Y.qr.chainId].icon}),(0,B.jsx)("span",{className:"options-dropdown__from-text",children:f===V.UY.chainId||f===Y.tm.chainId?x.fQ[Y.tm.chainId].text:x.QW[Y.qr.chainId].text})]})})};var Ne=function(e){var n=e.snx,t=(0,s.useReducer)((function(e){return e+1}),0),i=(0,h.Z)(t,2),r=i[0],c=i[1],v=(0,p.K)().chainId,f=(0,a.sJ)(l._t),j=(0,m.tN)(v,o.S7,f),b=j||(0,m.fk)(v),g=(0,B.jsx)(ke,(0,u.Z)({},b?(0,u.Z)((0,u.Z)({},x.W0),{},{CHAIN:[x.fQ[V.UY.chainId]].concat((0,d.Z)(x.W0.CHAIN))}):x.W0));return(0,B.jsx)("div",{className:"deposit__container",children:j?(0,B.jsx)(we,{resetComponent:c,snx:n,type:o.s5.DEPOSIT,optionsDropdown:g},r):(0,B.jsx)(ye,{optionsDropdown:g})})};var Te=function(e){var n=e.snx,t=(0,s.useReducer)((function(e){return e+1}),0),i=(0,h.Z)(t,2),r=i[0],c=i[1],d=(0,s.useState)(!1),u=(0,h.Z)(d,2),x=u[0],v=u[1],f=(0,s.useState)([]),j=(0,h.Z)(f,2),b=j[0],_=j[1],I=(0,p.K)().chainId,y=(0,a.sJ)(l.G2);(0,s.useEffect)((function(){var e=(0,m.Ju)(Y.qr.chainId,y.symbol,o.Az.CHAIN);_(e)}),[x,I,y]);var k=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("li",{children:"Takes usually under 20min"}),(0,B.jsx)("li",{children:"Limited to some tokens"}),(0,B.jsx)("li",{children:"Bridge to multiple chain"})]}),N=(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("li",{children:"Takes 7 days"}),(0,B.jsx)("li",{children:"Any tokens"}),(0,B.jsx)("li",{children:"Bridge to Ethereum Mainnet"})]});return(0,B.jsxs)("div",{className:"withdraw__container",children:[(0,B.jsxs)("div",{className:"withdraw__flow-buttons",children:[(0,B.jsxs)("button",{onClick:function(){return v(!1)},className:x?"":"active",children:[(0,B.jsx)(w.G,{icon:g.Acp}),(0,B.jsx)("h2",{children:"Using a third party bridge"}),(0,B.jsx)("ul",{className:"withdraw__description",children:k})]}),(0,B.jsxs)("button",{onClick:function(){return v(!0)},className:x?"active":"",children:[(0,B.jsx)(w.G,{icon:g.U7t}),(0,B.jsx)("h2",{children:"Using the official bridge"}),(0,B.jsx)("ul",{className:"withdraw__description",children:N})]})]}),(0,B.jsx)("ul",{className:"withdraw__mobile-description",children:x?N:k}),x?(0,B.jsx)(we,{resetComponent:c,snx:n,type:o.s5.WITHDRAW,optionsDropdown:(0,B.jsx)(ke,{})},r):(0,B.jsxs)("div",{className:"withdraw__external-flow",children:[(0,B.jsx)("p",{children:"These are independent service providers that Optimism is linking to for your convenience - Optimism has no responsibility for their operation."}),(0,B.jsx)("h2",{children:"Token to withdraw"}),(0,B.jsx)(de,{showBalances:!1}),(0,B.jsx)(Ie,{options:b,fromChain:Y.qr.chainName})]})]})};var Ee=function(e){var n=e.snx,t=e.type,d=(0,r.TH)(),u=(0,a.sJ)(l.TV);return(0,s.useEffect)((function(){document.title="Optimism Bridge"}),[]),(0,B.jsxs)(B.Fragment,{children:[u&&(0,r.LX)(c._j.WITHDRAW.template(),d.pathname)?(0,B.jsxs)("div",{className:"app-container__withdrawal-initiated",children:[(0,B.jsxs)("div",{className:"app-container__withdrawal-text",children:[(0,B.jsx)("h1",{children:"Withdrawal initiated"}),(0,B.jsx)("p",{children:"Your withdrawal will be available in ~7 days."})]}),(0,B.jsx)(i.rU,{to:c._j.ACCOUNT.create({type:c.qv.DEPOSIT}),children:"View account"})]}):null,(0,B.jsxs)("div",{className:"transaction-flow__wrapper",children:[(0,B.jsxs)("div",{className:"transaction-flow__container",children:[(0,B.jsxs)("div",{className:"transaction-flow__mode-types",children:[(0,B.jsx)(i.rU,{className:t===o.s5.DEPOSIT?"active":"",to:c._j.HOME.template(),children:"Deposit"}),(0,B.jsx)(i.rU,{"data-cy":"transaction-flow__withdraw-tab",className:t===o.s5.WITHDRAW?"active":"",to:c._j.WITHDRAW.template(),children:"Withdraw"})]}),t===o.s5.DEPOSIT&&(0,B.jsx)(Ne,{snx:n}),t===o.s5.WITHDRAW&&(0,B.jsx)(Te,{snx:n})]}),(0,B.jsx)("div",{className:"transaction-flow__subtext",children:(0,B.jsxs)("p",{children:["Need help? Read the"," ",(0,B.jsx)("a",{href:c.jY.HELP,target:"_blank",rel:"noreferrer",children:"FAQ"}),", try"," ",(0,B.jsx)("a",{href:c.jY.DISCORD,target:"_blank",rel:"noreferrer",children:"#user-support on Discord"})," ","or"," ",(0,B.jsx)("a",{href:c.jY.CANNY,target:"_blank",rel:"noreferrer",children:"file a bug"}),"."]})})]})]})}}}]);
//# sourceMappingURL=901.7fab5c0d.chunk.js.map